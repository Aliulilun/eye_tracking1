# âœ… å®‰è£å®Œæˆï¼

## ğŸ‰ æ‰€æœ‰å·¥å…·å·²åœ¨è™›æ“¬ç’°å¢ƒä¸­å®‰è£å®Œæˆ

### å·²å®‰è£çš„å¥—ä»¶

åœ¨ `.venv` è™›æ“¬ç’°å¢ƒä¸­å·²å®‰è£ï¼š

âœ… **æ ¸å¿ƒå¥—ä»¶**
- numpy (2.4.1)
- opencv-python (4.13.0.90)
- mediapipe (0.10.32) - **ä½¿ç”¨æ–°ç‰ˆ API**

âœ… **æ·±åº¦å­¸ç¿’**
- torch (2.10.0)
- torchvision (0.25.0)

âœ… **æ•¸æ“šè™•ç†**
- pandas (3.0.0)
- pyyaml (6.0.3)

âœ… **å¯è¦–åŒ–**
- matplotlib (3.10.8)
- Pillow (12.1.0)

âœ… **å·¥å…·**
- tqdm (4.67.1)

âœ… **æ¨¡å‹æ–‡ä»¶**
- face_landmarker.task (3.6 MB) - å·²ä¸‹è¼‰åˆ° models/

---

## ğŸ”§ ä»£ç¢¼å·²æ›´æ–°

### ç¬¬ä¸€éšæ®µå·²é©é… MediaPipe 0.10.32

`stages/stage1_face_detection.py` å·²æ›´æ–°ç‚ºä½¿ç”¨æ–°ç‰ˆ MediaPipe APIï¼š
- âœ… ä½¿ç”¨ `mediapipe.tasks.vision.FaceLandmarker`
- âœ… è‡ªå‹•ä¸‹è¼‰æ¨¡å‹æ–‡ä»¶
- âœ… å‘å¾Œå…¼å®¹ï¼ˆä»ç„¶è¼¸å‡º 468 å€‹ç‰¹å¾µé»ï¼‰

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. æ¯æ¬¡ä½¿ç”¨å‰å•Ÿå‹•è™›æ“¬ç’°å¢ƒ

```bash
cd /Users/liulilun/Documents/eye_tracking
source .venv/bin/activate
```

å‘½ä»¤æç¤ºç¬¦æœƒè®Šæˆï¼š`(.venv) liulilun@zhewo eye_tracking %`

### 2. é‹è¡Œæ¸¬è©¦

```bash
# æ¸¬è©¦å–®å¼µåœ–ç‰‡
python test_stage1.py --mode image --input test_images/your_face.jpg

# æ¸¬è©¦ç¶²è·¯æ”åƒé ­ï¼ˆå³æ™‚ï¼‰
python test_stage1.py --mode webcam

# ç°¡å–®æ¸¬è©¦
python test_detection_simple.py
```

### 3. çµæŸæ™‚é€€å‡ºè™›æ“¬ç’°å¢ƒ

```bash
deactivate
```

---

## ğŸ“¸ é—œæ–¼æ¸¬è©¦åœ–ç‰‡

ç›®å‰çš„ `test_images/face1.jpg` **æœªæª¢æ¸¬åˆ°äººè‡‰**ï¼Œå¯èƒ½åŸå› ï¼š
- äººè‡‰è§’åº¦å¤ªå¤§
- äººè‡‰è¢«é®æ“‹
- åœ–ç‰‡è³ªé‡å•é¡Œ
- å…‰ç·šä¸è¶³

### å»ºè­°ï¼š

#### é¸é … Aï¼šä½¿ç”¨ç¶²è·¯æ”åƒé ­å³æ™‚æ¸¬è©¦ï¼ˆæ¨è–¦ï¼‰

```bash
source .venv/bin/activate
python test_stage1.py --mode webcam
```

é€™æ¨£å¯ä»¥ç›´æ¥çœ‹åˆ°æª¢æ¸¬æ•ˆæœï¼

#### é¸é … Bï¼šæº–å‚™æ–°çš„æ¸¬è©¦åœ–ç‰‡

æ‰¾ä¸€å¼µç¬¦åˆä»¥ä¸‹æ¢ä»¶çš„åœ–ç‰‡ï¼š
- âœ… äººè‡‰æ¸…æ™°å¯è¦‹
- âœ… æ­£é¢æˆ–è¼•å¾®å´é¢ï¼ˆÂ±45Â° å…§ï¼‰
- âœ… å…‰ç·šå……è¶³
- âœ… æ²’æœ‰é®æ“‹ï¼ˆå£ç½©ã€æ‰‹ã€é ­é«®ï¼‰
- âœ… è§£æåº¦è‡³å°‘ 640Ã—480

æ”¾åˆ° `test_images/` è³‡æ–™å¤¾ï¼Œç„¶å¾Œæ¸¬è©¦ï¼š

```bash
source .venv/bin/activate
python test_stage1.py --mode image --input test_images/your_new_photo.jpg
```

---

## ğŸ” é©—è­‰å®‰è£

é‹è¡Œé€™å€‹å‘½ä»¤é©—è­‰æ‰€æœ‰å¥—ä»¶å·²æ­£ç¢ºå®‰è£ï¼š

```bash
source .venv/bin/activate
python -c "
import cv2
import mediapipe as mp
import numpy as np
import torch
import pandas as pd
import yaml
print('âœ“ æ‰€æœ‰å¥—ä»¶å®‰è£æˆåŠŸï¼')
print(f'  - OpenCV: {cv2.__version__}')
print(f'  - MediaPipe: {mp.__version__}')
print(f'  - NumPy: {np.__version__}')
print(f'  - PyTorch: {torch.__version__}')
print(f'  - Pandas: {pd.__version__}')
"
```

æ‡‰è©²é¡¯ç¤ºæ‰€æœ‰ç‰ˆæœ¬è™Ÿä¸”æ²’æœ‰éŒ¯èª¤ã€‚

---

## ğŸ“ å°ˆæ¡ˆé€²åº¦

âœ… **å·²å®Œæˆ**
- å°ˆæ¡ˆçµæ§‹å»ºç«‹
- è™›æ“¬ç’°å¢ƒè¨­ç½®
- æ‰€æœ‰ä¾è³´å¥—ä»¶å®‰è£
- MediaPipe æ–°ç‰ˆ API é©é…
- ç¬¬ä¸€éšæ®µä»£ç¢¼å¯¦ç¾
- æ¨¡å‹æ–‡ä»¶ä¸‹è¼‰

âš ï¸ **å¾…å®Œæˆ**
- æº–å‚™åˆé©çš„æ¸¬è©¦åœ–ç‰‡ï¼Œæˆ–
- ä½¿ç”¨ç¶²è·¯æ”åƒé ­é€²è¡Œå³æ™‚æ¸¬è©¦

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ¸¬è©¦ç¬¬ä¸€éšæ®µ**ï¼ˆç”¨ç¶²è·¯æ”åƒé ­æˆ–æ–°çš„æ¸¬è©¦åœ–ç‰‡ï¼‰
2. **å¯¦ç¾ç¬¬äºŒéšæ®µ**ï¼šé ­éƒ¨å§¿æ…‹ä¼°è¨ˆ
3. **å¯¦ç¾ç¬¬ä¸‰éšæ®µ**ï¼šåœ–åƒæ­£è¦åŒ–
4. **å¯¦ç¾ç¬¬å››éšæ®µ**ï¼šç¥ç¶“ç¶²çµ¡æ¨ç†
5. **å¯¦ç¾ç¬¬äº”éšæ®µ**ï¼šè¦–ç·šå‘é‡è½‰æ›

---

## ğŸ’¡ æç¤º

- è¨˜å¾—æ¯æ¬¡ä½¿ç”¨éƒ½è¦ `source .venv/bin/activate`
- å¦‚æœå‡ºç¾éŒ¯èª¤ï¼Œæª¢æŸ¥æ˜¯å¦åœ¨è™›æ“¬ç’°å¢ƒä¸­ï¼ˆå‘½ä»¤æç¤ºç¬¦æœ‰ `(.venv)`ï¼‰
- æ¨¡å‹æ–‡ä»¶å·²ä¸‹è¼‰åˆ° `models/face_landmarker.task`ï¼ˆ3.6 MBï¼‰

---

**å®‰è£å®Œæˆï¼æº–å‚™å¥½æ¸¬è©¦äº†å—ï¼Ÿ** ğŸš€

è©¦è©¦çœ‹ï¼š
```bash
source .venv/bin/activate
python test_stage1.py --mode webcam
```

